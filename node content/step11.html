<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Step 11 — Manager Dashboard: Post-Cleaning Workflow</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<style>
  :root {
    --primary: #2b5fad;
    --primary-dark: #1f4e8a;
    --primary-light: #eef5ff;
    --secondary: #10b981;
    --secondary-dark: #0da271;
    --warning: #f59e0b;
    --danger: #dc3545;
    --success: #28a745;
    --light-bg: #f8fafc;
    --card-bg: #ffffff;
    --text-primary: #1e293b;
    --text-secondary: #64748b;
    --border: #e2e8f0;
    --shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
    --radius: 12px;
    --radius-sm: 8px;
  }

  * {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
  }

  body {
    font-family: "Segoe UI", system-ui, -apple-system, sans-serif;
    background: linear-gradient(135deg, #f6f9ff 0%, #f1f5f9 100%);
    color: var(--text-primary);
    line-height: 1.6;
    min-height: 100vh;
  }

  /* Dashboard Layout */
  .dashboard-container {
    display: grid;
    grid-template-columns: 280px 1fr;
    min-height: 100vh;
  }

  /* Sidebar */
  .sidebar {
    background: linear-gradient(180deg, var(--primary) 0%, var(--primary-dark) 100%);
    color: white;
    padding: 25px 20px;
    position: sticky;
    top: 0;
    height: 100vh;
    overflow-y: auto;
  }

  .manager-profile {
    text-align: center;
    padding-bottom: 25px;
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    margin-bottom: 25px;
  }

  .profile-avatar {
    width: 80px;
    height: 80px;
    background: rgba(255, 255, 255, 0.1);
    border-radius: 50%;
    margin: 0 auto 15px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 32px;
  }

  .manager-name {
    font-size: 20px;
    font-weight: 600;
    margin-bottom: 5px;
  }

  .manager-role {
    font-size: 14px;
    opacity: 0.9;
    margin-bottom: 10px;
  }

  .sidebar-nav {
    display: flex;
    flex-direction: column;
    gap: 8px;
  }

  .nav-item {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 14px 16px;
    color: rgba(255, 255, 255, 0.9);
    text-decoration: none;
    border-radius: var(--radius-sm);
    transition: all 0.3s ease;
    background: none;
    border: none;
    cursor: pointer;
    width: 100%;
    text-align: left;
    font-family: inherit;
    font-size: inherit;
  }

  .nav-item:hover {
    background: rgba(255, 255, 255, 0.1);
    color: white;
  }

  .nav-item.active {
    background: rgba(255, 255, 255, 0.15);
    color: white;
    font-weight: 600;
  }

  .nav-badge {
    margin-left: auto;
    background: var(--warning);
    color: white;
    font-size: 12px;
    padding: 2px 8px;
    border-radius: 10px;
  }

  /* Main Content */
  .main-content {
    padding: 30px;
    overflow-y: auto;
  }

  /* Header */
  .content-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 30px;
    padding-bottom: 20px;
    border-bottom: 2px solid var(--border);
  }

  .header-title h1 {
    font-size: 28px;
    color: var(--primary-dark);
    margin-bottom: 8px;
  }

  .header-title p {
    color: var(--text-secondary);
    font-size: 15px;
  }

  .header-stats {
    display: flex;
    gap: 15px;
  }

  .stat-box {
    background: var(--card-bg);
    padding: 12px 20px;
    border-radius: var(--radius);
    border: 1px solid var(--border);
    text-align: center;
    min-width: 120px;
  }

  .stat-value {
    font-size: 22px;
    font-weight: 700;
    color: var(--primary);
    margin-bottom: 5px;
  }

  .stat-label {
    font-size: 12px;
    color: var(--text-secondary);
    text-transform: uppercase;
    letter-spacing: 0.5px;
  }

  /* Dashboard Grid */
  .dashboard-grid {
    display: grid;
    grid-template-columns: 2fr 1fr;
    gap: 25px;
    margin-bottom: 30px;
  }

  /* Card Styles */
  .card {
    background: var(--card-bg);
    border-radius: var(--radius);
    padding: 25px;
    box-shadow: var(--shadow);
    margin-bottom: 25px;
  }

  .card-header {
    display: flex;
    align-items: center;
    gap: 12px;
    margin-bottom: 20px;
    padding-bottom: 15px;
    border-bottom: 2px solid var(--border);
  }

  .card-icon {
    width: 40px;
    height: 40px;
    background: linear-gradient(135deg, var(--primary), var(--primary-dark));
    border-radius: 10px;
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    font-size: 20px;
  }

  .card-title h2 {
    font-size: 20px;
    color: var(--primary-dark);
    margin-bottom: 4px;
  }

  .card-title p {
    color: var(--text-secondary);
    font-size: 14px;
  }

  /* Appointment Overview */
  .overview-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 15px;
    margin-top: 15px;
  }

  .overview-item {
    padding: 15px;
    background: var(--light-bg);
    border-radius: var(--radius-sm);
    border: 1px solid var(--border);
  }

  .overview-label {
    font-size: 12px;
    color: var(--text-secondary);
    text-transform: uppercase;
    letter-spacing: 0.5px;
    margin-bottom: 8px;
  }

  .overview-value {
    font-size: 16px;
    font-weight: 600;
    color: var(--text-primary);
  }

  .status-badge {
    display: inline-flex;
    align-items: center;
    gap: 6px;
    padding: 6px 12px;
    border-radius: 20px;
    font-size: 12px;
    font-weight: 600;
    text-transform: uppercase;
  }

  .status-completed {
    background: #e8fce8;
    color: #2c7a2c;
  }

  .status-in-progress {
    background: #fff3cd;
    color: #856404;
  }

  .status-pending {
    background: #f1f1f1;
    color: #666;
  }

  /* Task Completion Table */
  .table-container {
    overflow-x: auto;
    border-radius: var(--radius);
    border: 1px solid var(--border);
    margin-top: 20px;
  }

  table {
    width: 100%;
    border-collapse: collapse;
    font-size: 14px;
  }

  thead {
    background: var(--light-bg);
  }

  th {
    padding: 15px;
    text-align: left;
    font-weight: 600;
    color: var(--text-primary);
    border-bottom: 2px solid var(--border);
    white-space: nowrap;
  }

  td {
    padding: 15px;
    border-bottom: 1px solid var(--border);
    vertical-align: middle;
  }

  tbody tr {
    transition: background 0.2s ease;
  }

  tbody tr:hover {
    background: #f9f9ff;
  }

  /* Photo Gallery */
  .photo-gallery {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
    gap: 10px;
    margin-top: 10px;
  }

  .photo-item {
    position: relative;
    aspect-ratio: 4/3;
    border-radius: var(--radius-sm);
    overflow: hidden;
    border: 1px solid var(--border);
    cursor: pointer;
    transition: transform 0.3s ease;
  }

  .photo-item:hover {
    transform: scale(1.05);
  }

  .photo-item img {
    width: 100%;
    height: 100%;
    object-fit: cover;
  }

  .photo-badge {
    position: absolute;
    top: 5px;
    right: 5px;
    background: rgba(0, 0, 0, 0.7);
    color: white;
    padding: 2px 6px;
    border-radius: 10px;
    font-size: 10px;
    font-weight: 600;
  }

  /* KPI Metrics */
  .kpi-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
    gap: 15px;
    margin-top: 20px;
  }

  .kpi-card {
    background: var(--light-bg);
    padding: 20px;
    border-radius: var(--radius-sm);
    border: 1px solid var(--border);
    text-align: center;
  }

  .kpi-value {
    font-size: 28px;
    font-weight: 700;
    margin-bottom: 8px;
  }

  .kpi-label {
    font-size: 12px;
    color: var(--text-secondary);
    text-transform: uppercase;
    letter-spacing: 0.5px;
  }

  .kpi-trend {
    font-size: 12px;
    margin-top: 5px;
  }

  .trend-up {
    color: var(--success);
  }

  .trend-down {
    color: var(--danger);
  }

  /* Action Buttons */
  .action-section {
    background: linear-gradient(135deg, #f6f9ff 0%, #e8efff 100%);
    border-radius: var(--radius);
    padding: 30px;
    margin-top: 30px;
    border: 2px solid var(--primary);
  }

  .action-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 20px;
    margin-top: 20px;
  }

  .btn {
    padding: 16px 24px;
    border: none;
    border-radius: var(--radius);
    font-weight: 600;
    font-size: 15px;
    cursor: pointer;
    transition: all 0.3s ease;
    display: flex;
    align-items: center;
    gap: 12px;
    justify-content: center;
    min-width: 200px;
  }

  .btn-primary {
    background: var(--primary);
    color: white;
  }

  .btn-primary:hover {
    background: var(--primary-dark);
    transform: translateY(-2px);
    box-shadow: 0 8px 20px rgba(43, 95, 173, 0.3);
  }

  .btn-success {
    background: var(--success);
    color: white;
  }

  .btn-success:hover {
    background: #218838;
    transform: translateY(-2px);
    box-shadow: 0 8px 20px rgba(40, 167, 69, 0.3);
  }

  .btn-success:disabled {
    background: #ccc;
    cursor: not-allowed;
    opacity: 0.6;
  }

  .btn-warning {
    background: var(--warning);
    color: white;
  }

  .btn-warning:hover {
    background: #d97706;
    transform: translateY(-2px);
    box-shadow: 0 8px 20px rgba(245, 158, 11, 0.3);
  }

  .btn-outline {
    background: white;
    color: var(--primary);
    border: 2px solid var(--primary);
  }

  .btn-outline:hover {
    background: var(--primary-light);
  }

  /* Notes Section */
  .notes-section {
    background: #f8f9fa;
    border-radius: var(--radius);
    padding: 25px;
    margin-top: 25px;
    border-left: 4px solid var(--primary);
  }

  textarea {
    width: 100%;
    padding: 15px;
    border: 1px solid var(--border);
    border-radius: var(--radius-sm);
    font-family: inherit;
    font-size: 14px;
    line-height: 1.5;
    resize: vertical;
    min-height: 120px;
    margin-top: 15px;
  }

  textarea:focus {
    outline: none;
    border-color: var(--primary);
    box-shadow: 0 0 0 3px rgba(43, 95, 173, 0.1);
  }

  /* Invoice Preview */
  .invoice-preview {
    background: white;
    border-radius: var(--radius);
    padding: 20px;
    border: 1px solid var(--border);
    font-family: 'Courier New', monospace;
    margin-top: 20px;
    max-height: 300px;
    overflow-y: auto;
  }

  .invoice-line {
    display: flex;
    justify-content: space-between;
    padding: 8px 0;
    border-bottom: 1px dashed #eee;
  }

  .invoice-total {
    font-weight: 700;
    font-size: 18px;
    color: var(--primary);
    margin-top: 15px;
    padding-top: 15px;
    border-top: 2px solid var(--border);
  }

  /* Right Sidebar */
  .right-sidebar {
    display: flex;
    flex-direction: column;
    gap: 25px;
  }

  .widget {
    background: var(--card-bg);
    border-radius: var(--radius);
    padding: 20px;
    box-shadow: var(--shadow);
  }

  .widget-header {
    display: flex;
    align-items: center;
    gap: 12px;
    margin-bottom: 15px;
    padding-bottom: 15px;
    border-bottom: 1px solid var(--border);
  }

  .widget-icon {
    width: 36px;
    height: 36px;
    background: var(--primary-light);
    border-radius: 8px;
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--primary);
    font-size: 18px;
  }

  /* Timeline */
  .timeline {
    margin-top: 15px;
  }

  .timeline-item {
    display: flex;
    gap: 12px;
    padding: 10px 0;
    border-bottom: 1px solid var(--border);
  }

  .timeline-item:last-child {
    border-bottom: none;
  }

  .timeline-icon {
    width: 24px;
    height: 24px;
    background: var(--light-bg);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--primary);
    font-size: 12px;
  }

  .timeline-content {
    flex: 1;
  }

  .timeline-time {
    font-size: 12px;
    color: var(--text-secondary);
    margin-bottom: 2px;
  }

  .timeline-text {
    font-size: 14px;
  }

  /* Modal */
  .modal {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.5);
    z-index: 1000;
    align-items: center;
    justify-content: center;
  }

  .modal-content {
    background: white;
    border-radius: var(--radius);
    padding: 30px;
    max-width: 800px;
    width: 90%;
    max-height: 90vh;
    overflow-y: auto;
  }

  .modal-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 20px;
    padding-bottom: 15px;
    border-bottom: 2px solid var(--border);
  }

  .modal-close {
    background: none;
    border: none;
    font-size: 24px;
    color: var(--text-secondary);
    cursor: pointer;
    line-height: 1;
  }

  .full-image {
    width: 100%;
    max-height: 70vh;
    object-fit: contain;
    border-radius: var(--radius-sm);
  }

  /* Notification */
  .notification {
    position: fixed;
    top: 20px;
    right: 20px;
    background: white;
    border-radius: var(--radius);
    padding: 20px;
    box-shadow: 0 10px 30px rgba(0,0,0,0.2);
    z-index: 1000;
    display: none;
    max-width: 400px;
    animation: slideIn 0.3s ease;
  }

  @keyframes slideIn {
    from {
      opacity: 0;
      transform: translateX(20px);
    }
    to {
      opacity: 1;
      transform: translateX(0);
    }
  }

  .notification-header {
    display: flex;
    align-items: center;
    gap: 12px;
    margin-bottom: 15px;
  }

  .notification-icon {
    width: 40px;
    height: 40px;
    background: var(--secondary);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    font-size: 20px;
  }

  /* Responsive */
  @media (max-width: 1200px) {
    .dashboard-container {
      grid-template-columns: 1fr;
    }
    
    .sidebar {
      display: none;
    }
    
    .dashboard-grid {
      grid-template-columns: 1fr;
    }
  }

  @media (max-width: 768px) {
    .main-content {
      padding: 20px;
    }
    
    .content-header {
      flex-direction: column;
      gap: 20px;
    }
    
    .header-stats {
      width: 100%;
      justify-content: space-between;
    }
    
    .overview-grid {
      grid-template-columns: 1fr;
    }
    
    .action-grid {
      grid-template-columns: 1fr;
    }
    
    .btn {
      width: 100%;
    }
    
    .kpi-grid {
      grid-template-columns: 1fr 1fr;
    }
  }
</style>
</head>
<body>
  <!-- Dashboard Container -->
  <div class="dashboard-container">
    <!-- Sidebar -->
    <aside class="sidebar">
      <div class="manager-profile">
        <div class="profile-avatar">
          <i class="fas fa-user-tie"></i>
        </div>
        <h2 class="manager-name">Sarah Manager</h2>
        <p class="manager-role">Operations Manager</p>
        <div style="font-size: 13px; opacity: 0.8;">
          Manager ID: MG-2025-001
        </div>
      </div>

      <nav class="sidebar-nav">
        <button onclick="location.href='step10.html'" class="nav-item">
          <i class="fas fa-arrow-left"></i>
          Back to Cleaning
        </button>
        <button onclick="location.href='ManageBooking-nodecontent.html'" class="nav-item">
          <i class="fas fa-sitemap"></i>
          Back to Node Presentation
        </button>
        <button class="nav-item active">
          <i class="fas fa-clipboard-check"></i>
          Post-Cleaning Review
        </button>
        <button class="nav-item">
          <i class="fas fa-file-invoice-dollar"></i>
          Invoicing
          <span class="nav-badge">3</span>
        </button>
        <button class="nav-item">
          <i class="fas fa-chart-bar"></i>
          Performance Analytics
        </button>
        <button class="nav-item">
          <i class="fas fa-users"></i>
          Cleaner Management
        </button>
       <button onclick="location.href='step12.html'" 
        class="nav-item" 
        style="background:none; border:none; cursor:pointer; width:100%; text-align:left;">
  <i class="fas fa-arrow-right"></i>
  Go to Step 12
</button>
      </nav>

      <div style="margin-top: auto; padding-top: 20px; font-size: 12px; opacity: 0.7; text-align: center;">
        <p>Step 11: Post-Cleaning Workflow</p>
        <p>© 2025 CleanPro Systems</p>
      </div>
    </aside>

    <!-- Main Content -->
    <main class="main-content">
      <!-- Header -->
      <header class="content-header">
        <div class="header-title">
          <h1>Post-Cleaning Workflow Review</h1>
          <p>Verify task completion, review performance, and finalize appointment</p>
        </div>
        <div class="header-stats">
          <div class="stat-box">
            <div class="stat-value" id="completedCount">24</div>
            <div class="stat-label">Completed Today</div>
          </div>
          <div class="stat-box">
            <div class="stat-value">98.5%</div>
            <div class="stat-label">Completion Rate</div>
          </div>
          <div class="stat-box">
            <div class="stat-value">4.8</div>
            <div class="stat-label">Avg Rating</div>
          </div>
        </div>
      </header>

      <!-- Dashboard Grid -->
      <div class="dashboard-grid">
        <!-- Left Column -->
        <div>
          <!-- Appointment Overview -->
          <div class="card">
            <div class="card-header">
              <div class="card-icon">
                <i class="fas fa-calendar-check"></i>
              </div>
              <div class="card-title">
                <h2>Appointment Overview</h2>
                <p>APT-2025-3321 - Deep Cleaning Service</p>
              </div>
              <div class="status-badge status-completed">
                <i class="fas fa-check-circle"></i> Cleaning Completed
              </div>
            </div>
            
            <div class="overview-grid">
              <div class="overview-item">
                <div class="overview-label">Client Name</div>
                <div class="overview-value">Maria Santos</div>
              </div>
              <div class="overview-item">
                <div class="overview-label">Address</div>
                <div class="overview-value">Tower 3, Casa Verde Residences, Makati City</div>
              </div>
              <div class="overview-item">
                <div class="overview-label">Date & Time</div>
                <div class="overview-value">Feb 15, 2025 — 2:00 PM</div>
              </div>
              <div class="overview-item">
                <div class="overview-label">Service Type</div>
                <div class="overview-value">Deep Cleaning + Balcony</div>
              </div>
              <div class="overview-item">
                <div class="overview-label">Assigned Cleaners</div>
                <div class="overview-value">Jane Smith, John M.</div>
              </div>
              <div class="overview-item">
                <div class="overview-label">Total Duration</div>
                <div class="overview-value">4.5 hours</div>
              </div>
              <div class="overview-item">
                <div class="overview-label">Payment Type</div>
                <div class="overview-value">Online Paid</div>
              </div>
              <div class="overview-item">
                <div class="overview-label">Total Value</div>
                <div class="overview-value">$450.00</div>
              </div>
            </div>
            
            <div style="margin-top: 20px; padding: 15px; background: var(--light-bg); border-radius: var(--radius-sm);">
              <div style="display: flex; justify-content: space-between; align-items: center;">
                <div>
                  <strong>Service Completion Time:</strong> 4.5 hours (as estimated)
                </div>
                <div style="color: var(--success); font-weight: 600;">
                  <i class="fas fa-clock"></i> On Time
                </div>
              </div>
              <div style="margin-top: 10px; font-size: 14px; color: var(--text-secondary);">
                <i class="fas fa-map-marker-alt"></i> GPS tracking confirmed cleaner attendance
              </div>
            </div>
          </div>

          <!-- Task Completion Table -->
          <div class="card">
            <div class="card-header">
              <div class="card-icon">
                <i class="fas fa-tasks"></i>
              </div>
              <div class="card-title">
                <h2>Task Completion Verification</h2>
                <p>Verify all tasks completed as per client requirements (Step 7)</p>
              </div>
              <div style="color: var(--success); font-weight: 600;">
                <i class="fas fa-check-circle"></i> All Tasks Complete
              </div>
            </div>
            
            <div class="table-container">
              <table>
                <thead>
                  <tr>
                    <th>Task</th>
                    <th>Cleaner</th>
                    <th>Duration</th>
                    <th>Status</th>
                    <th>Remarks / Notes</th>
                    <th>Photos</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td>Carpet Steam Clean — Living Room</td>
                    <td>Jane Smith</td>
                    <td>1 hr</td>
                    <td><span class="status-badge status-completed">Complete</span></td>
                    <td>Finished, client signed off. No issues.</td>
                    <td>
                      <div class="photo-gallery">
                        <div class="photo-item" onclick="openPhotoModal('before')">
                          <img src="https://placehold.co/100x75/2b5fad/ffffff?text=Before" alt="Before">
                          <span class="photo-badge">Before</span>
                        </div>
                        <div class="photo-item" onclick="openPhotoModal('after')">
                          <img src="https://placehold.co/100x75/10b981/ffffff?text=After" alt="After">
                          <span class="photo-badge">After</span>
                        </div>
                      </div>
                    </td>
                  </tr>
                  <tr>
                    <td>Kitchen Degrease & Cleaning</td>
                    <td>Jane Smith</td>
                    <td>45 min</td>
                    <td><span class="status-badge status-completed">Complete</span></td>
                    <td>All grease removed. Countertops sanitized.</td>
                    <td>
                      <div class="photo-gallery">
                        <div class="photo-item" onclick="openPhotoModal('kitchen1')">
                          <img src="https://placehold.co/100x75/f59e0b/ffffff?text=Kitchen" alt="Kitchen">
                          <span class="photo-badge">Photo</span>
                        </div>
                      </div>
                    </td>
                  </tr>
                  <tr>
                    <td>Bathroom Cleaning (2 Bathrooms)</td>
                    <td>John M.</td>
                    <td>30 min</td>
                    <td><span class="status-badge status-completed">Complete</span></td>
                    <td>Mirror cleaned, supplies restocked, tiles scrubbed.</td>
                    <td>
                      <div class="photo-gallery">
                        <div class="photo-item" onclick="openPhotoModal('bath1')">
                          <img src="https://placehold.co/100x75/2b5fad/ffffff?text=Bathroom" alt="Bathroom">
                          <span class="photo-badge">Photo</span>
                        </div>
                      </div>
                    </td>
                  </tr>
                  <tr>
                    <td>Balcony Floor Scrubbing</td>
                    <td>John M.</td>
                    <td>45 min</td>
                    <td><span class="status-badge status-completed">Complete</span></td>
                    <td>Moss and stains removed. Tiles cleaned.</td>
                    <td>
                      <div class="photo-gallery">
                        <div class="photo-item" onclick="openPhotoModal('balcony')">
                          <img src="https://placehold.co/100x75/10b981/ffffff?text=Balcony" alt="Balcony">
                          <span class="photo-badge">After</span>
                        </div>
                      </div>
                    </td>
                  </tr>
                  <tr>
                    <td>Cat Litter Area Cleaning</td>
                    <td>Jane Smith</td>
                    <td>20 min</td>
                    <td><span class="status-badge status-completed">Complete</span></td>
                    <td>Area sanitized. Mask used as instructed.</td>
                    <td>
                      <div class="photo-gallery">
                        <div class="photo-item" onclick="openPhotoModal('litter')">
                          <img src="https://placehold.co/100x75/f59e0b/ffffff?text=Litter+Area" alt="Litter Area">
                          <span class="photo-badge">Photo</span>
                        </div>
                      </div>
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
            
            <div style="margin-top: 20px; padding: 15px; background: #e8fce8; border-radius: var(--radius-sm);">
              <div style="display: flex; align-items: center; gap: 10px;">
                <i class="fas fa-check-circle" style="color: #2c7a2c;"></i>
                <div>
                  <strong>All tasks verified complete</strong> — All client-requested tasks from Step 7 have been completed
                </div>
              </div>
            </div>
          </div>

          <!-- Equipment Verification -->
          <div class="card">
            <div class="card-header">
              <div class="card-icon">
                <i class="fas fa-toolbox"></i>
              </div>
              <div class="card-title">
                <h2>Equipment Verification</h2>
                <p>Confirm all required equipment was used (from Step 8)</p>
              </div>
            </div>
            
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin-top: 15px;">
              <div style="padding: 15px; background: #e8fce8; border-radius: var(--radius-sm); border: 1px solid #c3e6cb;">
                <div style="display: flex; align-items: center; gap: 10px;">
                  <i class="fas fa-check-circle" style="color: #2c7a2c;"></i>
                  <strong>Steam Cleaning Machine</strong>
                </div>
                <div style="font-size: 14px; color: #666; margin-top: 5px;">Used for carpet cleaning</div>
              </div>
              <div style="padding: 15px; background: #e8fce8; border-radius: var(--radius-sm); border: 1px solid #c3e6cb;">
                <div style="display: flex; align-items: center; gap: 10px;">
                  <i class="fas fa-check-circle" style="color: #2c7a2c;"></i>
                  <strong>HEPA Vacuum Cleaner</strong>
                </div>
                <div style="font-size: 14px; color: #666; margin-top: 5px;">Allergen control verified</div>
              </div>
              <div style="padding: 15px; background: #e8fce8; border-radius: var(--radius-sm); border: 1px solid #c3e6cb;">
                <div style="display: flex; align-items: center; gap: 10px;">
                  <i class="fas fa-check-circle" style="color: #2c7a2c;"></i>
                  <strong>Eco-friendly Solutions</strong>
                </div>
                <div style="font-size: 14px; color: #666; margin-top: 5px;">Client allergy requirement met</div>
              </div>
              <div style="padding: 15px; background: #e8fce8; border-radius: var(--radius-sm); border: 1px solid #c3e6cb;">
                <div style="display: flex; align-items: center; gap: 10px;">
                  <i class="fas fa-check-circle" style="color: #2c7a2c;"></i>
                  <strong>Protective Gloves</strong>
                </div>
                <div style="font-size: 14px; color: #666; margin-top: 5px;">Chemical-resistant gloves used</div>
              </div>
            </div>
            
            <div style="margin-top: 20px; padding: 15px; background: #e8fce8; border-radius: var(--radius-sm);">
              <div style="display: flex; align-items: center; gap: 10px;">
                <i class="fas fa-shield-alt" style="color: #2c7a2c;"></i>
                <div>
                  <strong>Equipment compliance verified</strong> — All mandatory equipment from Step 8 was confirmed used
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Right Sidebar -->
        <aside class="right-sidebar">
          <!-- KPI Metrics -->
          <div class="widget">
            <div class="widget-header">
              <div class="widget-icon">
                <i class="fas fa-chart-line"></i>
              </div>
              <div>
                <h3>Cleaner Performance KPI</h3>
                <p style="font-size: 13px; color: var(--text-secondary);">This appointment metrics</p>
              </div>
            </div>
            
            <div class="kpi-grid">
              <div class="kpi-card">
                <div class="kpi-value">4.8</div>
                <div class="kpi-label">Client Rating</div>
                <div class="kpi-trend trend-up">+0.2 from avg</div>
              </div>
              <div class="kpi-card">
                <div class="kpi-value">100%</div>
                <div class="kpi-label">Task Completion</div>
                <div class="kpi-trend trend-up">Perfect score</div>
              </div>
              <div class="kpi-card">
                <div class="kpi-value">On Time</div>
                <div class="kpi-label">Punctuality</div>
                <div class="kpi-trend trend-up">Early by 15min</div>
              </div>
              <div class="kpi-card">
                <div class="kpi-value">98%</div>
                <div class="kpi-label">Quality Score</div>
                <div class="kpi-trend trend-up">+3% from avg</div>
              </div>
            </div>
            
            <div style="margin-top: 20px; padding-top: 15px; border-top: 1px solid var(--border);">
              <div style="font-size: 14px; color: var(--text-primary); font-weight: 600; margin-bottom: 10px;">
                Performance Summary
              </div>
              <p style="font-size: 13px; color: var(--text-secondary);">
                This appointment exceeded expectations. Cleaner demonstrated excellent attention to detail and followed all client special instructions.
              </p>
            </div>
          </div>

          <!-- Invoice Preview -->
          <div class="widget">
            <div class="widget-header">
              <div class="widget-icon">
                <i class="fas fa-file-invoice-dollar"></i>
              </div>
              <div>
                <h3>Invoice Preview</h3>
                <p style="font-size: 13px; color: var(--text-secondary);">Final billing summary</p>
              </div>
            </div>
            
            <div class="invoice-preview">
              <div style="text-align: center; margin-bottom: 15px; font-weight: 700; color: var(--primary);">
                CLEANPRO SERVICES INVOICE
              </div>
              
              <div class="invoice-line">
                <span>Deep Cleaning Service:</span>
                <span>$350.00</span>
              </div>
              <div class="invoice-line">
                <span>Balcony Cleaning Add-on:</span>
                <span>$50.00</span>
              </div>
              <div class="invoice-line">
                <span>Fridge Cleaning Add-on:</span>
                <span>$30.00</span>
              </div>
              <div class="invoice-line">
                <span>Eco-friendly Solutions:</span>
                <span>$20.00</span>
              </div>
              
              <div class="invoice-line">
                <span>Subtotal:</span>
                <span>$450.00</span>
              </div>
              <div class="invoice-line">
                <span>Tax (5%):</span>
                <span>$22.50</span>
              </div>
              
              <div class="invoice-total">
                <span>TOTAL DUE:</span>
                <span>$472.50</span>
              </div>
              
              <div style="margin-top: 15px; font-size: 12px; color: var(--text-secondary);">
                <div><strong>Billing Rule:</strong> Residential - Weekly</div>
                <div><strong>Payment Method:</strong> Online (Paid)</div>
                <div><strong>Invoice Date:</strong> Feb 15, 2025</div>
              </div>
            </div>
            
            <button class="btn btn-outline" style="width: 100%; margin-top: 15px;" onclick="downloadInvoice()">
              <i class="fas fa-download"></i>
              Download Invoice PDF
            </button>
          </div>

          <!-- Timeline -->
          <div class="widget">
            <div class="widget-header">
              <div class="widget-icon">
                <i class="fas fa-history"></i>
              </div>
              <div>
                <h3>Workflow Timeline</h3>
                <p style="font-size: 13px; color: var(--text-secondary);">Appointment history</p>
              </div>
            </div>
            
            <div class="timeline">
              <div class="timeline-item">
                <div class="timeline-icon">
                  <i class="fas fa-calendar-plus"></i>
                </div>
                <div class="timeline-content">
                  <div class="timeline-time">Feb 10, 2:30 PM</div>
                  <div class="timeline-text">Appointment created by client</div>
                </div>
              </div>
              <div class="timeline-item">
                <div class="timeline-icon">
                  <i class="fas fa-user-check"></i>
                </div>
                <div class="timeline-content">
                  <div class="timeline-time">Feb 12, 9:15 AM</div>
                  <div class="timeline-text">Assigned to Cleaner Team</div>
                </div>
              </div>
              <div class="timeline-item">
                <div class="timeline-icon">
                  <i class="fas fa-check-circle"></i>
                </div>
                <div class="timeline-content">
                  <div class="timeline-time">Today, 8:30 AM</div>
                  <div class="timeline-text">Accepted by cleaner</div>
                </div>
              </div>
              <div class="timeline-item">
                <div class="timeline-icon">
                  <i class="fas fa-play-circle"></i>
                </div>
                <div class="timeline-content">
                  <div class="timeline-time">Today, 2:05 PM</div>
                  <div class="timeline-text">Service started (GPS tracking)</div>
                </div>
              </div>
              <div class="timeline-item">
                <div class="timeline-icon">
                  <i class="fas fa-stop-circle"></i>
                </div>
                <div class="timeline-content">
                  <div class="timeline-time">Today, 6:35 PM</div>
                  <div class="timeline-text">Service completed by cleaner</div>
                </div>
              </div>
              <div class="timeline-item">
                <div class="timeline-icon">
                  <i class="fas fa-clock"></i>
                </div>
                <div class="timeline-content">
                  <div class="timeline-time">Now</div>
                  <div class="timeline-text">Awaiting manager finalization</div>
                </div>
              </div>
            </div>
          </div>
        </aside>
      </div>

      <!-- Internal Notes Section -->
      <div class="notes-section">
        <div class="card-header" style="border-bottom: none; padding-bottom: 0;">
          <div class="card-icon">
            <i class="fas fa-sticky-note"></i>
          </div>
          <div class="card-title">
            <h2>Internal Notes & Comments</h2>
            <p>Add manager notes for audit trail and KPI tracking</p>
          </div>
        </div>
        
        <textarea id="managerNotes" placeholder="Add internal notes here...">All tasks completed successfully. Client was very satisfied with balcony cleaning. Cleaner demonstrated excellent attention to detail with fragile items. No equipment issues reported. Ready to generate invoice.</textarea>
        
        <div style="margin-top: 20px; display: flex; justify-content: space-between; align-items: center;">
          <div style="font-size: 14px; color: var(--text-secondary);">
            <i class="fas fa-info-circle"></i>
            Notes are saved automatically and visible to management only
          </div>
          <button class="btn btn-outline" onclick="saveNotes()">
            <i class="fas fa-save"></i>
            Save Notes
          </button>
        </div>
      </div>

      <!-- Action Section -->
      <div class="action-section">
        <h2 style="color: var(--primary-dark); text-align: center; margin-bottom: 15px;">Finalize Appointment</h2>
        <p style="text-align: center; color: var(--text-secondary); margin-bottom: 25px; max-width: 800px; margin-left: auto; margin-right: auto;">
          Verify all tasks are complete, equipment was used, and client requirements were met before finalizing.
        </p>
        
        <div class="action-grid">
          <button class="btn btn-warning" onclick="viewTaskPhotos()">
            <i class="fas fa-images"></i>
            View All Task Photos
          </button>
          <button class="btn btn-outline" onclick="generateReport()">
            <i class="fas fa-file-alt"></i>
            Generate QA Report
          </button>
          <button class="btn btn-success" id="completeBtn" onclick="serviceComplete()">
            <i class="fas fa-check-double"></i>
            Mark Service Complete
          </button>
          <button class="btn btn-primary" id="invoiceBtn" onclick="createInvoice()">
            <i class="fas fa-file-invoice-dollar"></i>
            Create Final Invoice
          </button>
        </div>
        
        <div style="margin-top: 25px; padding: 20px; background: white; border-radius: var(--radius);">
          <div style="display: flex; align-items: center; gap: 15px;">
            <i class="fas fa-check-circle" style="color: var(--success); font-size: 20px;"></i>
            <div>
              <div style="font-weight: 600; color: var(--text-primary);">All verification checks passed:</div>
              <div style="font-size: 14px; color: var(--text-secondary); margin-top: 5px;">
                ✓ All tasks completed ✓ Equipment verified ✓ Photos uploaded ✓ Client satisfied ✓ No issues reported
              </div>
            </div>
          </div>
        </div>
      </div>
    </main>
  </div>

  <!-- Photo Modal -->
  <div id="photoModal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h2 style="color: var(--primary-dark);">Task Photo Evidence</h2>
        <button class="modal-close" onclick="closePhotoModal()">×</button>
      </div>
      <img id="modalPhoto" class="full-image" src="" alt="Task photo">
      <div style="margin-top: 20px; display: flex; justify-content: space-between; align-items: center;">
        <div>
          <strong id="photoTitle">Before Cleaning</strong>
          <div style="font-size: 14px; color: var(--text-secondary);" id="photoDescription">Uploaded by cleaner during service</div>
        </div>
        <div>
          <button onclick="closePhotoModal()" style="padding: 10px 20px; background: var(--primary); color: white; border: none; border-radius: var(--radius-sm); cursor: pointer; font-weight: 600;">
            Close
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Notification -->
  <div id="notification" class="notification">
    <div class="notification-header">
      <div class="notification-icon">
        <i class="fas fa-check"></i>
      </div>
      <div>
        <h3 style="color: var(--primary-dark);" id="notificationTitle">Service Completed!</h3>
        <p style="font-size: 14px; color: var(--text-secondary);" id="notificationSubtitle">Status updated successfully</p>
      </div>
    </div>
    <div id="notificationMessage" style="font-size: 15px; margin-bottom: 20px;">
      <!-- Message will be inserted here -->
    </div>
    <div style="display: flex; gap: 10px;">
      <button onclick="closeNotification()" style="flex: 1; padding: 12px; background: var(--primary); color: white; border: none; border-radius: var(--radius-sm); cursor: pointer; font-weight: 600;">
        OK
      </button>
      <button onclick="goToStep12()" style="flex: 1; padding: 12px; background: white; color: var(--primary); border: 1px solid var(--primary); border-radius: var(--radius-sm); cursor: pointer; font-weight: 600;">
        Step 12 →
      </button>
    </div>
  </div>

  <script>
    // Service completion
    function serviceComplete() {
      if (confirm('Mark this service as fully completed?\n\nThis will:\n• Update appointment status\n• Finalize cleaner KPI\n• Complete time tracking\n• Archive all data')) {
        const completeBtn = document.getElementById('completeBtn');
        const invoiceBtn = document.getElementById('invoiceBtn');
        
        if (completeBtn) {
          completeBtn.disabled = true;
          completeBtn.innerHTML = '<i class="fas fa-check"></i> Service Finalized';
        }
        
        if (invoiceBtn) {
          invoiceBtn.disabled = false;
        }
        
        // Update counts
        updateCompletedCount();
        
        // Show notification
        showNotification('Service Finalized', 'Appointment status updated to "Service Completed".', `
          <p><strong>Appointment APT-2025-3321</strong> has been finalized.</p>
          <p style="margin-top: 10px;">✅ Cleaner KPI updated</p>
          <p>✅ Time tracking completed</p>
          <p>✅ Audit trail saved</p>
          <p>✅ Ready for invoicing</p>
          <p style="margin-top: 10px; font-size: 14px; color: var(--text-secondary);">
            Next: Generate final invoice for client.
          </p>
        `);
      }
    }
    
    // Create invoice
    function createInvoice() {
      const completeBtn = document.getElementById('completeBtn');
      if (completeBtn && !completeBtn.disabled) {
        alert('Please mark service complete before generating invoice.');
        return;
      }
      
      if (confirm('Generate final invoice?\n\nBilling Rule: Residential (Weekly)\nClient will be billed this week.')) {
        const invoiceBtn = document.getElementById('invoiceBtn');
        if (invoiceBtn) {
          invoiceBtn.disabled = true;
          invoiceBtn.innerHTML = '<i class="fas fa-check"></i> Invoice Generated';
        }
        
        showNotification('Invoice Generated', 'Final invoice created and queued for billing.', `
          <p><strong>Invoice generated for APT-2025-3321</strong></p>
          <p style="margin-top: 10px;">✅ Total Amount: $472.50</p>
          <p>✅ Billing Rule: Residential Weekly</p>
          <p>✅ Invoice Date: Feb 15, 2025</p>
          <p>✅ Status: Queued for weekly batch</p>
          <p style="margin-top: 10px; font-size: 14px; color: var(--text-secondary);">
            Invoice will be included in this week's residential billing cycle.
          </p>
        `);
      }
    }
    
    // View task photos
    function viewTaskPhotos() {
      alert('Opening photo gallery with all task evidence...');
      // In real app, this would open a modal with all photos
    }
    
    // Open specific photo modal
    function openPhotoModal(photoType) {
      const modal = document.getElementById('photoModal');
      const modalPhoto = document.getElementById('modalPhoto');
      const photoTitle = document.getElementById('photoTitle');
      const photoDescription = document.getElementById('photoDescription');
      
      // Set photo based on type
      const photos = {
        'before': { src: 'https://placehold.co/600x400/2b5fad/ffffff?text=Before+Cleaning', title: 'Before Cleaning', desc: 'Living room carpet before steam cleaning' },
        'after': { src: 'https://placehold.co/600x400/10b981/ffffff?text=After+Cleaning', title: 'After Cleaning', desc: 'Living room carpet after steam cleaning' },
        'kitchen1': { src: 'https://placehold.co/600x400/f59e0b/ffffff?text=Kitchen+Clean', title: 'Kitchen Clean', desc: 'Countertops after degreasing' },
        'bath1': { src: 'https://placehold.co/600x400/2b5fad/ffffff?text=Bathroom', title: 'Bathroom', desc: 'Mirror and tiles cleaned' },
        'balcony': { src: 'https://placehold.co/600x400/10b981/ffffff?text=Balcony', title: 'Balcony', desc: 'Floor tiles after scrubbing' },
        'litter': { src: 'https://placehold.co/600x400/f59e0b/ffffff?text=Litter+Area', title: 'Litter Area', desc: 'Sanitized area with mask usage' }
      };
      
      if (photos[photoType]) {
        modalPhoto.src = photos[photoType].src;
        photoTitle.textContent = photos[photoType].title;
        photoDescription.textContent = photos[photoType].desc;
      }
      
      modal.style.display = 'flex';
    }
    
    // Close photo modal
    function closePhotoModal() {
      document.getElementById('photoModal').style.display = 'none';
    }
    
    // Generate report
    function generateReport() {
      alert('Generating Quality Assurance Report...\n\nReport will include:\n• Task completion summary\n• Photo evidence\n• Cleaner performance metrics\n• Client satisfaction indicators\n• Equipment usage verification');
    }
    
    // Download invoice
    function downloadInvoice() {
      alert('Downloading invoice PDF...');
    }
    
    // Save notes
    function saveNotes() {
      const notes = document.getElementById('managerNotes').value;
      // In real app, this would save to server
      alert('Internal notes saved successfully.');
    }
    
    // Show notification
    function showNotification(title, subtitle, message) {
      const notification = document.getElementById('notification');
      const notificationTitle = document.getElementById('notificationTitle');
      const notificationSubtitle = document.getElementById('notificationSubtitle');
      const notificationMessage = document.getElementById('notificationMessage');
      
      notificationTitle.textContent = title;
      notificationSubtitle.textContent = subtitle;
      notificationMessage.innerHTML = message;
      
      notification.style.display = 'block';
      
      // Auto-hide after 10 seconds
      setTimeout(() => {
        if (notification.style.display === 'block') {
          notification.style.display = 'none';
        }
      }, 10000);
    }
    
    // Close notification
    function closeNotification() {
      document.getElementById('notification').style.display = 'none';
    }
    
    // Go to Step 12
    function goToStep12() {
      closeNotification();
      alert('Proceeding to Step 12: Client Notification & Payment...');
      // In real app: window.location.href = 'step12.html';
    }
    
    // Update completed count
    function updateCompletedCount() {
      const countElement = document.getElementById('completedCount');
      if (countElement) {
        const currentCount = parseInt(countElement.textContent);
        countElement.textContent = currentCount + 1;
      }
    }
    
    // Initialize
    document.addEventListener('DOMContentLoaded', function() {
      // Disable invoice button initially (service not complete)
      document.getElementById('invoiceBtn').disabled = true;
    });
    
    // Close modals when clicking outside
    window.onclick = function(event) {
      const photoModal = document.getElementById('photoModal');
      const notification = document.getElementById('notification');
      
      if (event.target === photoModal) {
        closePhotoModal();
      }
      if (event.target === notification) {
        closeNotification();
      }
    }
  </script>
</body>
</html>